/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","hammerjs","promise","ojs/ojjquery-hammer","ojs/ojcomponentcore"],function(a,g,c){a.j={};o_("OffcanvasUtils",a.j,a);a.j.gP="oj-offcanvasEdge";a.j.Pp="oj-offcanvas";a.j.hP="oj-mediaQueryListener";a.j.Y0="oj-offcanvasHammer";a.j.Z0="oj-offcanvasStyle";a.j.kB="selector";a.j.bx="content";a.j.fu="start";a.j.eu="end";a.j.WA="top";a.j.mG="bottom";a.j.cu="displayMode";a.j.du="push";a.j.$N="overlay";a.j.u_="pin";a.j.Xja="modality";a.j.gKa="none";a.j.Yja="modal";a.j.lG="_dismissHandler";
a.j.BO="_openPromise";a.j.UA="_closePromise";a.j.ku="_glassPane";a.j.k0="_surrogate";a.j.HO="data-oj-offcanvas-surrogate-id";a.j.hka="oj-offcanvas-outer-wrapper";a.j.gB="oj-offcanvas-open";a.j.Jh="oj-offcanvas-transition";a.j.W_="oj-offcanvas-pin";a.j.V_="oj-offcanvas-pin-transition";a.j.Gja="oj-offcanvas-glasspane";a.j.ZA="oj-offcanvas-glasspane-dim";a.j.Bka="ojbeforeopen veto";a.j.Aka="ojbeforeclose veto";a.j.HCa={start:"oj-offcanvas-shift-start",end:"oj-offcanvas-shift-end",top:"oj-offcanvas-shift-down",
bottom:"oj-offcanvas-shift-up"};a.j.Ora={start:"oj-offcanvas-start",end:"oj-offcanvas-end",top:"oj-offcanvas-top",bottom:"oj-offcanvas-bottom"};a.j.ata=function(b){b=b[a.j.cu];b!==a.j.$N&&b!==a.j.du&&b!==a.j.u_&&(b=(a.td.Of("oj-offcanvas-option-defaults")||{}).displayMode);return b};a.j.Eg=function(b){return g(b[a.j.kB])};a.j.Sy=function(b){return b[a.j.Xja]===a.j.Yja};a.j.Hs=function(b){return b.hasClass(a.j.gB)};a.j.rs=function(b){return b.closest("."+a.j.hka)};a.j.II=function(b){var c=a.j.Eg(b);
return a.j.E$(b)||b[a.j.cu]===a.j.$N?c:c.parent()};a.j.dua=function(b){var c=a.j.HCa[b];if(!c)throw"Invalid edge: "+b;return c};a.j.cg=function(){return"rtl"===a.A.wn()};a.j.Lk=function(a,c){a.css({"-webkit-transform":c,transform:c})};a.j.rJ=function(b,c,e){b=b===a.j.eu;if(a.j.cg()||e)b=!b;return"translate3d("+(b?"-":"")+c+", 0, 0)"};a.j.NK=function(b,c,e){a.j.Lk(b,a.j.rJ(c,e,!1))};a.j.Z7=function(b,c){return"translate3d(0, "+(b===a.j.mG?"-":"")+c+", 0)"};a.j.wCa=function(b,c,e){a.j.Lk(b,a.j.Z7(c,
e))};a.j.a8=function(a,c){return"translate3d(0, "+(c?"-":"")+a+", 0)"};a.j.FBa=function(b,c,e){b.addClass(a.j.Jh);a.j.Lk(b,"translate3d(0, 0, 0)");c.addClass(a.j.Jh);a.j.Lk(c,e)};a.j.rba=function(b){var c=b.edge;b=a.j.Eg(b);c&&c.length||(c=b.hasClass("oj-offcanvas-start")?a.j.fu:b.hasClass("oj-offcanvas-end")?a.j.eu:b.hasClass("oj-offcanvas-top")?a.j.WA:b.hasClass("oj-offcanvas-bottom")?a.j.mG:a.j.fu);g.data(b[0],a.j.gP,c);return c};a.j.GS=function(b){return g.data(b[0],a.j.gP)};a.j.vE=function(b,
c,e){var f=b[a.j.cu],g=a.j.Eg(b),k=a.j.gB,f=f===a.j.$N?a.j.Jh+" oj-offcanvas-overlay":a.j.Jh;e?(g.addClass(k),c.addClass(f)):(b.makeFocusable&&a.A.jN({element:g,remove:!0}),b=b.tabindex,void 0===b?g.removeAttr("tabindex"):g.attr("tabindex",b),g.removeClass(k),c.removeClass(f))};a.j.Qj=function(b){var c=a.j.Eg(b),e=c.find("[autofocus]");0==e.length&&(e=c.find(":tabbable"));0==e.length?(e=c.attr("tabindex"),void 0!==e&&(b.tabindex=e),c.attr("tabindex","-1"),e=c,a.A.jN({element:c,applyHighlight:!0}),
b.makeFocusable=!0):e=e[0];a.le.UE(e)};a.j.yxa=function(a){return"none"!=a.autoDismiss};a.j.en=function(a,c){function e(){c(a);a.off("transitionend.oc webkitTransitionEnd.oc otransitionend.oc oTransitionEnd.oc",e)}a.on("transitionend.oc webkitTransitionEnd.oc otransitionend.oc oTransitionEnd.oc",e)};a.j.D4=function(b){a.j.close(b)["catch"](function(b){a.r.warn("Offcancas close failed: "+b)})};a.j.aE=function(b){a.j.OW(b);if(a.j.yxa(b)){var c=a.j.Eg(b),e=b[a.j.lG]=function(e){var f=e.target;a.A.vga(e)||
"focus"===e.type&&!g(f).is(":focusable")||(null==g.data(c[0],a.j.Pp)?a.j.OW(b):a.A.VHa(c[0],f)||a.j.D4(b))},f=document.documentElement;a.A.Ke()&&f.addEventListener("touchstart",e,!0);f.addEventListener("mousedown",e,!0);f.addEventListener("focus",e,!0)}a.j.kz(b)};a.j.OW=function(b){var c=b[a.j.lG];if(c){var e=document.documentElement;a.A.Ke()&&e.removeEventListener("touchstart",c,!0);e.removeEventListener("mousedown",c,!0);e.removeEventListener("focus",c,!0);delete b[a.j.lG];b[a.j.lG]=null}a.j.gL(b)};
a.j.kz=function(b){if(a.A.Ke()){var d=b[a.j.kB],e=g(d),f=a.j.GS(e),h,k;f===a.j.fu&&!a.j.cg()||f===a.j.eu&&a.j.cg()?(k={recognizers:[[c.Swipe,{direction:c.DIRECTION_LEFT}]]},h="swipeleft"):f===a.j.fu&&a.j.cg()||f===a.j.eu&&!a.j.cg()?(k={recognizers:[[c.Swipe,{direction:c.DIRECTION_RIGHT}]]},h="swiperight"):f===a.j.WA?(k={recognizers:[[c.Swipe,{direction:c.DIRECTION_UP}]]},h="swipeup"):f===a.j.mG&&(k={recognizers:[[c.Swipe,{direction:c.DIRECTION_DOWN}]]},h="swipedown");f=e.hj(k).on(h,function(c){c.target===
e[0]&&(c.preventDefault(),a.j.D4(b))});g.data(g(d)[0],a.j.Y0,{event:h,hammer:f})}};a.j.gL=function(b){b=a.j.Eg(b);0<b.length&&(b=g.data(b[0],a.j.Y0))&&b.hammer.off(b.event)};a.j.Ixa=function(b){return a.j.rs(b).hasClass("oj-offcanvas-page")};a.j.SJ=function(b){return b[a.j.cu]===a.j.u_};a.j.E$=function(b){return b[a.j.bx]||a.j.Ixa(a.j.Eg(b))||a.j.SJ(b)};a.j.tBa=function(b){var c=b.attr("style");void 0!==c&&g.data(b[0],a.j.Z0,c)};a.j.oBa=function(b){var c=g.data(b[0],a.j.Z0);c?b.attr("style",c):b.removeAttr("style")};
a.j.Aq=function(b,c){var e=a.j.GS(b),e=a.j.dua(e),f=a.j.rs(b);a.o.ue(f,jQuery);var g=f.hasClass(e);c||f.toggleClass(e,!g);return g};a.j.lI=function(a,c){function e(){null==("fixed"===g(a).css("position")?a.parentNode.offsetParent:a.offsetParent)?c():f=window.requestAnimationFrame(e)}var f=0,f=window.requestAnimationFrame(e);return function(){0!==f&&window.cancelAnimationFrame(f)}};a.j.Wr=function(b){var c=a.j.Eg(b),e=a.j.SJ(b);if(g.data(c[0],a.j.Pp)===b){a.j.GS(c);var f=a.j.II(b);e?c.removeClass(a.j.gB+
" "+a.j.V_):a.j.vE(b,f,!1);a.j.JAa(b);a.j.OW(b);e&&(a.j.rs(c).removeClass(a.j.W_),a.j.oBa(c));c.trigger("ojclose",b);g.removeData(c[0],a.j.Pp)}};a.j.dca=function(b,c,e){var f=g(b);(c=!!c)&&a.j.Hs(f)&&a.j.$p(b,!1);f.toggleClass(a.j.Ora[e],!c)};a.j.yJa=function(b){var c=b.query;if(null!==c){var e=b[a.j.kB],c=window.matchMedia(c),f=a.j.rba(b);b=function(b){a.j.dca(e,b.matches,f)};c.addListener(b);a.j.dca(e,c.matches,f);g.data(g(e)[0],a.j.hP,{mqList:c,mqListener:b})}};o_("OffcanvasUtils.setupResponsive",
a.j.yJa,a);a.j.NJa=function(b){b=a.j.Eg(b);var c=g.data(b[0],a.j.hP);c&&(c.mqList.removeListener(c.mqListener),g.removeData(b[0],a.j.hP))};o_("OffcanvasUtils.tearDownResponsive",a.j.NJa,a);a.j.kza=function(b,c,e){function f(e){e.removeClass(a.j.Jh);l?l=!1:(a.j.Qj(b),h.trigger("ojopen",b),a.j.aE(b),c(!0))}var h=a.j.Eg(b),k=g(b[a.j.bx]);a.o.ue(k,jQuery);var l=!0,m=b.size,s;h.addClass(a.j.gB);window.setTimeout(function(){e===a.j.fu||e===a.j.eu?(void 0===m&&(m=h.outerWidth(!0)+"px"),a.j.Lk(h,a.j.rJ(e,
m,!0)),s=a.j.rJ(e,m,!1)):(void 0===m&&(m=h.outerHeight(!0)+"px"),a.j.Lk(h,a.j.a8(m,e===a.j.WA)),s=a.j.a8(m,e!==a.j.WA));window.setTimeout(function(){a.j.FBa(h,k,s);a.j.Aq(h,!1)},0)},0);a.j.IH(b,h);a.j.en(k,f);a.j.en(h,f)};a.j.fza=function(b,c,e){var f=a.j.Eg(b);a.j.vE(b,f,!0);var g=b.size;g&&(e===a.j.fu||e===a.j.eu?a.j.Lk(f,a.j.rJ(e,g,!0)):a.j.Lk(f,a.j.Z7(e,g)));window.setTimeout(function(){a.j.Aq(f,!1)},10);a.j.IH(b,f);a.j.en(f,function(){f.removeClass(a.j.Jh);a.j.Qj(b);f.trigger("ojopen",b);a.j.aE(b);
c(!0)})};a.j.gza=function(b,c){var e=a.j.Eg(b),f=g(b[a.j.bx]);a.o.ue(f,jQuery);var h=b.size;e.addClass(a.j.gB);window.setTimeout(function(){void 0===h&&(h=e.outerWidth(!0)+"px");e.addClass(a.j.V_);a.j.rs(e).addClass(a.j.W_);a.j.tBa(e);a.j.Lk(e,"none");window.setTimeout(function(){e.css("min-width",h);a.j.Aq(e,!1)},10)},0);a.j.IH(b,e);a.j.en(e,function(){a.j.Qj(b);e.trigger("ojopen",b);a.j.aE(b);c(!0)})};a.j.Ipa=function(b,c,e,f){function h(e){l&&e?l=!1:(k.removeClass(a.j.Jh),a.j.Lk(k,""),a.j.Wr(b),
m&&m(),c(!0))}var k=g(b[a.j.bx]),l=!0,m;f&&(a.j.en(e,h),a.j.en(k,h),m=a.j.lI(e[0],h));a.j.Lk(e,"");a.j.Lk(k,"");a.j.Aq(e,!1);a.j.Sy(b)&&b[a.j.ku].removeClass(a.j.ZA);f?(k.addClass(a.j.Jh),e.addClass(a.j.Jh)):(a.j.Wr(b),c(!0))};a.j.Gpa=function(b,c,e,f){function g(){a.j.Wr(b);k&&k();c(!0)}var k;f&&(a.j.en(e,g),k=a.j.lI(e[0],g));a.j.Aq(e,!1);a.j.Sy(b)&&b[a.j.ku].removeClass(a.j.ZA);f?e.addClass(a.j.Jh):(a.j.Wr(b),c(!0))};a.j.eza=function(b,c,e,f){var g=a.j.Eg(b),k=a.j.II(b);a.o.ue(k,jQuery);a.j.vE(b,
k,!0);var l;e===a.j.fu||e===a.j.eu?(l=void 0===l?g.outerWidth(!0)+"px":l,f===a.j.du&&a.j.NK(k,e,l)):(l=void 0===l?g.outerHeight(!0)+"px":l,f===a.j.du&&a.j.wCa(k,e,l));window.setTimeout(function(){a.j.Aq(g,!1)},10);a.j.IH(b,g);a.j.en(k,function(){k.removeClass(a.j.Jh);a.j.Qj(b);g.trigger("ojopen",b);a.j.aE(b);c(!0)})};a.j.Hpa=function(b,c,e,f){function g(){a.j.Wr(b);k&&k();c(!0)}var k;f&&(a.j.en(e,g),k=a.j.lI(e[0],g));a.j.Aq(e,!1);a.j.Sy(b)&&b[a.j.ku].removeClass(a.j.ZA);f?e.css("min-width","0"):(a.j.Wr(b),
c(!0))};a.j.Fpa=function(b,c,e,f){function g(){a.j.Wr(b);m&&m();c(!0)}var k=b[a.j.cu],l=a.j.II(b),m;f&&(a.j.en(l,g),m=a.j.lI(e[0],g));k===a.j.du&&a.j.Lk(l,"");a.j.Aq(e,!1);a.j.Sy(b)&&b[a.j.ku].removeClass(a.j.ZA);f?l.addClass(a.j.Jh):(a.j.Wr(b),c(!0))};a.j.open=function(b){var c=a.j.Eg(b),e=g.data(c[0],a.j.Pp);if(e){if(e[a.j.UA])return e[a.j.UA];if(e[a.j.BO])return e[a.j.BO]}var f=!1,h=new Promise(function(e,l){a.o.ue(c,jQuery);var m=a.j.rba(b),s=g.Event("ojbeforeopen");c.trigger(s,b);if(!1===s.result)return l(a.j.Bka),
f=!0,h;var s=a.j.ata(b),t=a.j.SJ(b);!t||m!==a.j.WA&&m!==a.j.mG||(s=a.j.du);var r=g.extend({},b);r[a.j.cu]=s;g.data(c[0],a.j.Pp,r);if(b[a.j.bx]){if(!a.j.E$(b))throw"Error: Both main content selector and the inner wrapper \x3cdiv class\x3d'oj-offcanvas-inner-wrapper'\x3e are provided. Please remove the inner wrapper.";t?a.j.gza(r,e):s===a.j.du?a.j.kza(r,e,m):a.j.fza(r,e,m)}else a.j.eza(r,e,m,s)});f||(e=g.data(c[0],a.j.Pp))&&(e[a.j.BO]=h);return h};o_("OffcanvasUtils.open",a.j.open,a);a.j.close=function(b){return a.j.$p(b[a.j.kB],
!0)};o_("OffcanvasUtils.close",a.j.close,a);a.j.$p=function(b,c){var e=g(b);a.o.ue(e,jQuery);var f=g.data(e[0],a.j.Pp);if(f&&f[a.j.UA])return f[a.j.UA];var h=!1,k=new Promise(function(l,m){if(a.j.Hs(e)){b!=f[a.j.kB]&&l(!0);a.j.Aq(e,!0)||l(!0);var s=g.Event("ojbeforeclose");e.trigger(s,f);if(!1===s.result)return m(a.j.Aka),h=!0,k;var s=a.j.SJ(f),t=f[a.j.cu];f[a.j.bx]?t===a.j.du?a.j.Ipa(f,l,e,c):s?a.j.Hpa(f,l,e,c):a.j.Gpa(f,l,e,c):a.j.Fpa(f,l,e,c)}else l(!0)});h||(f=g.data(e[0],a.j.Pp))&&(f[a.j.UA]=
k);return k};a.j.toggle=function(b){var c=a.j.Eg(b);a.o.ue(c,jQuery);return a.j.Hs(c)?a.j.close(b):a.j.open(b)};o_("OffcanvasUtils.toggle",a.j.toggle,a);a.j.Rna=function(b){var c=g("\x3cdiv\x3e");c.addClass(a.j.Gja);c.attr("role","presentation");c.attr("aria-hidden","true");c.appendTo(b.parent());c.on("keydown keyup keypress mousedown mouseup mouseover mouseout click focusin focus",function(a){a.stopPropagation();a.preventDefault()});return c};a.j.CR=function(b){var c=g("\x3cscript\x3e"),e=b.attr("id");
e?(e=[e,"surrogate"].join("_"),c.attr("id",e)):e=c.uniqueId();c.insertBefore(b);b.attr(a.j.HO,e);return c};a.j.aDa=function(b,c){b[a.j.k0]=a.j.CR(c);c.appendTo(c.parent())};a.j.mBa=function(b){var c=a.j.Eg(b);b=b[a.j.k0];c&&b&&c.attr(a.j.HO)===b.attr("id")&&(c.insertAfter(b),c.removeAttr(a.j.HO),b.remove())};a.j.IH=function(b,c){a.j.Sy(b)&&(b[a.j.ku]=a.j.Rna(c),a.j.aDa(b,c),window.setTimeout(function(){b[a.j.ku].addClass(a.j.ZA)},0))};a.j.JAa=function(b){a.j.Sy(b)&&(b[a.j.ku].remove(),a.j.mBa(b))};
a.j.xia=function(b){var d,e,f,h,k,l,m,s,t,r,n,p;null==g(b).attr("oj-data-pansetup")&&(g(b).attr("oj-data-pansetup","true"),b.displayMode="push",d=a.j.Eg(b),e=b.size,null==e&&(e=d.outerWidth()),f=a.j.rs(d),h=a.j.II(b),k={recognizers:[[c.Pan,{direction:c.DIRECTION_HORIZONTAL}]]},l=!1,g(f).hj(k).on("panstart",function(e){m=null;switch(e.gesture.direction){case c.DIRECTION_LEFT:Math.abs(e.gesture.deltaY)<Math.abs(e.gesture.deltaX)&&(m=a.j.cg()?"end":"start");break;case c.DIRECTION_RIGHT:Math.abs(e.gesture.deltaY)<
Math.abs(e.gesture.deltaX)&&(m=a.j.cg()?"start":"end")}null!=m&&(s={direction:m,distance:Math.abs(e.gesture.deltaX)},t=g.Event("ojpanstart"),d.trigger(t,s),t.isDefaultPrevented()||(b._closePromise=null,h.off(".oc"),a.j.vE(b,h,!0),l=!0,e.stopPropagation()))}).on("panmove",function(b){l&&(r=Math.abs(b.gesture.deltaX),d.css("width",r),h.removeClass(a.j.Jh),a.j.NK(h,"start",b.gesture.deltaX+"px"),s={direction:m,distance:r},t=g.Event("ojpanmove"),d.trigger(t,s),b.stopPropagation())}).on("panend",function(c){l&&
(l=!1,r=Math.abs(c.gesture.deltaX),s={distance:r},t=g.Event("ojpanend"),d.trigger(t,s),c.stopPropagation(),t.isDefaultPrevented()?(p=function(){a.j.vE(b,h,!1);h.removeClass(a.j.Jh);h.off("transitionend webkitTransitionEnd otransitionend oTransitionEnd",p)},h.on("transitionend webkitTransitionEnd otransitionend oTransitionEnd",p),h.addClass(a.j.Jh),a.j.NK(h,"start","0px")):(h.addClass(a.j.Jh),n=b.edge,null==n&&(n=d.hasClass("oj-offcanvas-start")?"start":"end"),a.j.en(h,function(){d.css("width",e+"px")}),
a.j.NK(h,n,e+"px"),g.data(d[0],a.j.Pp,b),g.data(d[0],a.j.gP,n),a.j.aE(b)))}))};o_("OffcanvasUtils.setupPanToReveal",a.j.xia,a);a.j.Mia=function(b){b=a.j.Eg(b);g(a.j.rs(b)).off("panstart panmove panend")};o_("OffcanvasUtils.tearDownPanToReveal",a.j.Mia,a)});